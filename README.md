# 개요

프로젝트 설명하는 곳

# 1. 패키지 구조

패키지는 도메인 당 별도의 서비스라고 가정하고 나누어 두었다.

* external
* adapter
* application
* domain

## 1.1. domain

도메인에는 순수 비즈니스 로직만 위치한다. 의존성이 없어야 한다. 순수 pure 코틀린 코드만 존재한다.

## 1.2. application

port에는 요청을 받는 inbound와 외부로 요청하는 outbound가 존재한다.  
service에는 UseCase에 대한 구현체가 존재한다. outbound의 구현체는 좀 더 상위 레이어인 adapter에 있다.  

port에 대해 덧붙이자면...
inbound port: 내부 영역과 협력하기 위해 노출된 API
outbound port: 내부 영역에서 외부의 자원을 사용하기 위한 API

## 1.3. adapter

어댑터 역시 inbound와 outbound로 나뉜다.

inbound: 외부에서 들어온 요청을 내부의 스펙에 맞춰서 조정
outbound: 내부의 데이터를 외부의 스펙에 맞춰서 조정

## 1.4. 현재 구조에서의 한계

현재는 모놀리식 구조이기 때문에 철저하게 도메인을 구분하려고 하면 다음과 같은 문제가 발생할 수 있다.  

### 1.4.1. 트랜잭션

외부 도메인의 개입이 필요한 경우인데, 이 경우는 조금 곤란하다.  
메세징을 쓰면 트랜잭션이 깨지고 동기적인 동작 처리에 오히려 멸망한다.  
따라서 예외적인 패키지를 두는데 그것이 바로 external 패키지이다.  

이 패키지는 외부 도메인에 정의된 인터페이스를 구현하는 구현체에 한정되어 외부 의존을 허락한다.  

도메인 패키지에서는 external을 의존하는 경우가 없어야한다.  

## 1.5. 정리

이 구조의 핵심은 비즈니스 로직이 외부 의존성을 전혀 사용하지 않는데에 있다.  
현재는 모놀리식으로 동작하지만, 도메인을 기준으로 엄격하게 구분되어 있기 때문에 MSA로 전환할 때도 고통과 비용을 극단적으로 줄이면서 마이그레이션 할 수 있다.  
다만 단점은 존나 장황하다는 느낌을 받을 수 있다는 점인데, 이는 개발 역량에 달려있다.

# . 주의사항

이 프로젝트에선 JPA를 최소한으로만 사용함.  